<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 SQL data analyse | Bibliografie</title>
  <meta name="description" content="6 SQL data analyse | Bibliografie" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="6 SQL data analyse | Bibliografie" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 SQL data analyse | Bibliografie" />
  
  
  

<meta name="author" content="Wouter" />


<meta name="date" content="2024-06-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dosis-response-analyse.html"/>
<link rel="next" href="zelfgemaakte-package.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Portfolio</a></li>
<li class="chapter" data-level="2" data-path="cv-wouter-verra.html"><a href="cv-wouter-verra.html"><i class="fa fa-check"></i><b>2</b> CV Wouter Verra</a></li>
<li class="chapter" data-level="3" data-path="project-noldus.html"><a href="project-noldus.html"><i class="fa fa-check"></i><b>3</b> Project Noldus</a></li>
<li class="chapter" data-level="4" data-path="computer-vision-morris-watermaze.html"><a href="computer-vision-morris-watermaze.html"><i class="fa fa-check"></i><b>4</b> Computer vision morris watermaze</a></li>
<li class="chapter" data-level="5" data-path="dosis-response-analyse.html"><a href="dosis-response-analyse.html"><i class="fa fa-check"></i><b>5</b> Dosis response analyse</a></li>
<li class="chapter" data-level="6" data-path="sql-data-analyse.html"><a href="sql-data-analyse.html"><i class="fa fa-check"></i><b>6</b> SQL data analyse</a></li>
<li class="chapter" data-level="7" data-path="zelfgemaakte-package.html"><a href="zelfgemaakte-package.html"><i class="fa fa-check"></i><b>7</b> Zelfgemaakte package</a></li>
<li class="chapter" data-level="8" data-path="parameterizatie-van-rmarkdown-documenten.html"><a href="parameterizatie-van-rmarkdown-documenten.html"><i class="fa fa-check"></i><b>8</b> Parameterizatie van Rmarkdown documenten</a></li>
<li class="chapter" data-level="9" data-path="bibliografie.html"><a href="bibliografie.html"><i class="fa fa-check"></i><b>9</b> Bibliografie</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Bibliografie</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sql-data-analyse" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> SQL data analyse<a href="sql-data-analyse.html#sql-data-analyse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Hieronder wordt een data analyse uitgevoerd met behulp van SQL. Er zijn drie datasets, de eerste is van de activiteit van de griep in verschillende landen gemeten op verschillende dagen, de tweede is dezelfde informatie maar dan voor de ziekte dengue. Als laatste wordt hier gebruik gemaakt van een bijgevoegde dataset van dslabs genaamd gapminder met algemene demografische informatie per land. Het doel is om de data in te laden in SQL, dat weer aan te vragen met een query en daarna te visualiseren met wat grafieken.</p>
<p>Als eerste moet de data ingelezen worden, tidy gemaakt worden en er voor zorgen dat de datum gesplitst wordt over drie kolommen voor de verdere analyse. Daarna wordt het ook verkend om te controleren dat het inlezen goed is gegaan en de kolommen bijvoorbeeld de goede datatypes hebben.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="sql-data-analyse.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lees de data in</span></span>
<span id="cb10-2"><a href="sql-data-analyse.html#cb10-2" aria-hidden="true" tabindex="-1"></a>fluDf <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;flu_data.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>)</span>
<span id="cb10-3"><a href="sql-data-analyse.html#cb10-3" aria-hidden="true" tabindex="-1"></a>dengueDf <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;dengue.csv&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>)</span>
<span id="cb10-4"><a href="sql-data-analyse.html#cb10-4" aria-hidden="true" tabindex="-1"></a>gapminderDf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(gapminder)</span>
<span id="cb10-5"><a href="sql-data-analyse.html#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="sql-data-analyse.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># maak de griep en dengue data tidy want er zaten meerdere observaties op 1 rij</span></span>
<span id="cb10-7"><a href="sql-data-analyse.html#cb10-7" aria-hidden="true" tabindex="-1"></a>tidyFlu <span class="ot">&lt;-</span> fluDf <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="fu">tail</span>(<span class="fu">colnames</span>(fluDf), <span class="at">n=</span> <span class="dv">29</span>), <span class="at">names_to=</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to=</span> <span class="st">&quot;fluActivity&quot;</span>)</span>
<span id="cb10-8"><a href="sql-data-analyse.html#cb10-8" aria-hidden="true" tabindex="-1"></a>tidyDengue <span class="ot">&lt;-</span> dengueDf <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols=</span> <span class="fu">tail</span>(<span class="fu">colnames</span>(dengueDf), <span class="at">n=</span> <span class="dv">10</span>), <span class="at">names_to=</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to=</span> <span class="st">&quot;dengueActivity&quot;</span>)</span>
<span id="cb10-9"><a href="sql-data-analyse.html#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="sql-data-analyse.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># maak de datatype voor de country en year kolommen hetzelfde over de verschillende tabellen</span></span>
<span id="cb10-11"><a href="sql-data-analyse.html#cb10-11" aria-hidden="true" tabindex="-1"></a>gapminderDf<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.character</span>(gapminderDf<span class="sc">$</span>country)</span>
<span id="cb10-12"><a href="sql-data-analyse.html#cb10-12" aria-hidden="true" tabindex="-1"></a>tidyFlu <span class="ot">&lt;-</span> tidyFlu <span class="sc">%&gt;%</span> <span class="fu">separate</span>(<span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb10-13"><a href="sql-data-analyse.html#cb10-13" aria-hidden="true" tabindex="-1"></a>tidyDengue <span class="ot">&lt;-</span> tidyDengue <span class="sc">%&gt;%</span> <span class="fu">separate</span>(<span class="at">col =</span> Date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>)</span>
<span id="cb10-14"><a href="sql-data-analyse.html#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="sql-data-analyse.html#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># kijk of de datatypes nu overeenkomen en verken verder de data</span></span>
<span id="cb10-16"><a href="sql-data-analyse.html#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tidyDengue)</span></code></pre></div>
<pre><code>##      year              month               day              country          dengueActivity  
##  Length:6590        Length:6590        Length:6590        Length:6590        Min.   :0.0000  
##  Class :character   Class :character   Class :character   Class :character   1st Qu.:0.0530  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character   Median :0.1040  
##                                                                              Mean   :0.1390  
##                                                                              3rd Qu.:0.1755  
##                                                                              Max.   :1.0000  
##                                                                              NA&#39;s   :327</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="sql-data-analyse.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tidyFlu)</span></code></pre></div>
<pre><code>##      year              month               day              country           fluActivity     
##  Length:19111       Length:19111       Length:19111       Length:19111       Min.   :    0.0  
##  Class :character   Class :character   Class :character   Class :character   1st Qu.:   37.0  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character   Median :  185.0  
##                                                                              Mean   :  473.7  
##                                                                              3rd Qu.:  578.0  
##                                                                              Max.   :10555.0  
##                                                                              NA&#39;s   :1845</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="sql-data-analyse.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gapminderDf)</span></code></pre></div>
<pre><code>##    country               year      infant_mortality life_expectancy   fertility       population              gdp                    continent                region    
##  Length:10545       Min.   :1960   Min.   :  1.50   Min.   :13.20   Min.   :0.840   Min.   :     31238   Min.   :      40395128   Africa  :2907   Western Asia   :1026  
##  Class :character   1st Qu.:1974   1st Qu.: 16.00   1st Qu.:57.50   1st Qu.:2.200   1st Qu.:   1333486   1st Qu.:    1845780110   Americas:2052   Eastern Africa : 912  
##  Mode  :character   Median :1988   Median : 41.50   Median :67.54   Median :3.750   Median :   5009043   Median :    7794215003   Asia    :2679   Western Africa : 912  
##                     Mean   :1988   Mean   : 55.31   Mean   :64.81   Mean   :4.084   Mean   :  27014609   Mean   :  147954410013   Europe  :2223   Caribbean      : 741  
##                     3rd Qu.:2002   3rd Qu.: 85.10   3rd Qu.:73.00   3rd Qu.:6.000   3rd Qu.:  15231789   3rd Qu.:   55399648248   Oceania : 684   South America  : 684  
##                     Max.   :2016   Max.   :276.90   Max.   :83.90   Max.   :9.220   Max.   :1376048943   Max.   :11744219459700                   Southern Europe: 684  
##                                    NA&#39;s   :1453                     NA&#39;s   :187     NA&#39;s   :185          NA&#39;s   :2972                             (Other)        :5586</code></pre>
<p>Hierna wordt de gecleande data opgeslagen als CSV en als RDS.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="sql-data-analyse.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sla de gecleande data op</span></span>
<span id="cb16-2"><a href="sql-data-analyse.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(tidyFlu, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;tidyFlu.csv&quot;</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb16-3"><a href="sql-data-analyse.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(tidyDengue, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;tidyDengue.csv&quot;</span>))</span>
<span id="cb16-4"><a href="sql-data-analyse.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gapminderDf, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;gapminderDf.csv&quot;</span>))</span>
<span id="cb16-5"><a href="sql-data-analyse.html#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(tidyFlu, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;tidyFlu.rds&quot;</span>))</span>
<span id="cb16-6"><a href="sql-data-analyse.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(tidyDengue, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;tidyDengue.rds&quot;</span>))</span>
<span id="cb16-7"><a href="sql-data-analyse.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(gapminderDf, <span class="at">file =</span> <span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;gapminderDf.rds&quot;</span>))</span></code></pre></div>
<p>Nu wordt er een con object gemaakt wat niet included is in de html zodat men online mijn wachtwoord niet ziet. Daarna worden de CSVs geupload naar de SQL server.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="sql-data-analyse.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># laad de tabellen in de database in</span></span>
<span id="cb17-2"><a href="sql-data-analyse.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;tidyFlu&quot;</span>, <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;tidyFlu.csv&quot;</span>)), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-3"><a href="sql-data-analyse.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;tidyDengue&quot;</span>, <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;tidyDengue.csv&quot;</span>)), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-4"><a href="sql-data-analyse.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminderDf&quot;</span>, <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;assignment_7&quot;</span>, <span class="st">&quot;gapminderDf.csv&quot;</span>)), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Vervolgens wordt er wat verkennende data aangevraagd aan de database om te controleren dat de data goed is over gekomen waarna het uiteindelijk gejoined opgevraagd wordt vanuit de server.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="sql-data-analyse.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># laat de namen van de verschillende tabellen in de database zien</span></span>
<span id="cb18-2"><a href="sql-data-analyse.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span></code></pre></div>
<pre><code>## [1] &quot;tidyFlu&quot;     &quot;tidyDengue&quot;  &quot;gapminderDf&quot;</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="sql-data-analyse.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># laat de namen van de kolommen van de verschillende tabellen zien</span></span>
<span id="cb20-2"><a href="sql-data-analyse.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListFields</span>(con, <span class="fu">dbListTables</span>(con)[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;year&quot;        &quot;month&quot;       &quot;day&quot;         &quot;country&quot;     &quot;fluActivity&quot;</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="sql-data-analyse.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListFields</span>(con, <span class="fu">dbListTables</span>(con)[<span class="dv">2</span>])</span></code></pre></div>
<pre><code>## [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;country&quot;        &quot;dengueActivity&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="sql-data-analyse.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListFields</span>(con, <span class="fu">dbListTables</span>(con)[<span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] &quot;country&quot;          &quot;year&quot;             &quot;infant_mortality&quot; &quot;life_expectancy&quot;  &quot;fertility&quot;        &quot;population&quot;       &quot;gdp&quot;              &quot;continent&quot;       
## [9] &quot;region&quot;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="sql-data-analyse.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># geef een summary van alle tabellen in de database</span></span>
<span id="cb26-2"><a href="sql-data-analyse.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">dbReadTable</span>(con, <span class="fu">dbListTables</span>(con)[<span class="dv">1</span>]))</span></code></pre></div>
<pre><code>##       year         month               day              country           fluActivity     
##  Min.   :2002   Length:19111       Length:19111       Length:19111       Min.   :    0.0  
##  1st Qu.:2006   Class :character   Class :character   Class :character   1st Qu.:   37.0  
##  Median :2009   Mode  :character   Mode  :character   Mode  :character   Median :  185.0  
##  Mean   :2009                                                            Mean   :  473.7  
##  3rd Qu.:2012                                                            3rd Qu.:  578.0  
##  Max.   :2015                                                            Max.   :10555.0  
##                                                                          NA&#39;s   :1845</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="sql-data-analyse.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">dbReadTable</span>(con, <span class="fu">dbListTables</span>(con)[<span class="dv">2</span>]))</span></code></pre></div>
<pre><code>##       year         month               day              country          dengueActivity  
##  Min.   :2002   Length:6590        Length:6590        Length:6590        Min.   :0.0000  
##  1st Qu.:2006   Class :character   Class :character   Class :character   1st Qu.:0.0530  
##  Median :2009   Mode  :character   Mode  :character   Mode  :character   Median :0.1040  
##  Mean   :2009                                                            Mean   :0.1390  
##  3rd Qu.:2012                                                            3rd Qu.:0.1755  
##  Max.   :2015                                                            Max.   :1.0000  
##                                                                          NA&#39;s   :327</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="sql-data-analyse.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">dbReadTable</span>(con, <span class="fu">dbListTables</span>(con)[<span class="dv">3</span>]))</span></code></pre></div>
<pre><code>##    country               year      infant_mortality life_expectancy   fertility       population              gdp                  continent            region         
##  Length:10545       Min.   :1960   Min.   :  1.50   Min.   :13.20   Min.   :0.840   Min.   :     31238   Min.   :      40395128   Length:10545       Length:10545      
##  Class :character   1st Qu.:1974   1st Qu.: 16.00   1st Qu.:57.50   1st Qu.:2.200   1st Qu.:   1333486   1st Qu.:    1845780110   Class :character   Class :character  
##  Mode  :character   Median :1988   Median : 41.50   Median :67.54   Median :3.750   Median :   5009043   Median :    7794215003   Mode  :character   Mode  :character  
##                     Mean   :1988   Mean   : 55.31   Mean   :64.81   Mean   :4.084   Mean   :  27014609   Mean   :  147954410013                                        
##                     3rd Qu.:2002   3rd Qu.: 85.10   3rd Qu.:73.00   3rd Qu.:6.000   3rd Qu.:  15231789   3rd Qu.:   55399648248                                        
##                     Max.   :2016   Max.   :276.90   Max.   :83.90   Max.   :9.220   Max.   :1376048943   Max.   :11744219459700                                        
##                                    NA&#39;s   :1453                     NA&#39;s   :187     NA&#39;s   :185          NA&#39;s   :2972</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="sql-data-analyse.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join de gapminder tabel met de tidyflu tabel</span></span>
<span id="cb32-2"><a href="sql-data-analyse.html#cb32-2" aria-hidden="true" tabindex="-1"></a>joined <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">&quot;SELECT * </span></span>
<span id="cb32-3"><a href="sql-data-analyse.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="st">           FROM </span><span class="sc">\&quot;</span><span class="st">gapminderDf</span><span class="sc">\&quot;</span><span class="st"> </span></span>
<span id="cb32-4"><a href="sql-data-analyse.html#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="st">           INNER JOIN </span><span class="sc">\&quot;</span><span class="st">tidyFlu</span><span class="sc">\&quot;</span><span class="st"> </span></span>
<span id="cb32-5"><a href="sql-data-analyse.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="st">           ON </span><span class="sc">\&quot;</span><span class="st">gapminderDf</span><span class="sc">\&quot;</span><span class="st">.year = </span><span class="sc">\&quot;</span><span class="st">tidyFlu</span><span class="sc">\&quot;</span><span class="st">.year </span></span>
<span id="cb32-6"><a href="sql-data-analyse.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="st">           AND </span><span class="sc">\&quot;</span><span class="st">gapminderDf</span><span class="sc">\&quot;</span><span class="st">.country = </span><span class="sc">\&quot;</span><span class="st">tidyFlu</span><span class="sc">\&quot;</span><span class="st">.country&quot;</span>)</span></code></pre></div>
<p>Uiteindelijk wordt de opgevraagde gejoinde data gebruikt om een paar visualisaties van de data mee te doen. Als eerste is er een box plot met op de y-as de levensverwachting in jaren en dit is gegroepeert per regio. De volgende is een lijngrafiek met op de y-as de kindersterfte per duizend kinderen in Argentinië en op de x-as de jaren waarop dit gemeten is. De laatste grafiek is een cirkel diagram met de BBP opgeteld per continent.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="sql-data-analyse.html#cb33-1" aria-hidden="true" tabindex="-1"></a>joined <span class="sc">%&gt;%</span>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> region, <span class="at">y =</span> life_expectancy)) <span class="sc">+</span> </span>
<span id="cb33-2"><a href="sql-data-analyse.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb33-3"><a href="sql-data-analyse.html#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Levensverwachting per regio&quot;</span>,</span>
<span id="cb33-4"><a href="sql-data-analyse.html#cb33-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Levensverwachting in jaren&quot;</span>,</span>
<span id="cb33-5"><a href="sql-data-analyse.html#cb33-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Regio&#39;s&quot;</span>) <span class="sc">+</span></span>
<span id="cb33-6"><a href="sql-data-analyse.html#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb33-7"><a href="sql-data-analyse.html#cb33-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x=</span><span class="fu">element_blank</span>(),</span>
<span id="cb33-8"><a href="sql-data-analyse.html#cb33-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.x=</span><span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="sql-data-analyse.html#cb34-1" aria-hidden="true" tabindex="-1"></a>joined <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Argentina&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> infant_mortality)) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="sql-data-analyse.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb34-3"><a href="sql-data-analyse.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">2000</span>,<span class="dv">2020</span>,<span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb34-4"><a href="sql-data-analyse.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb34-5"><a href="sql-data-analyse.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Kindersterfte per jaar in Argentinië&quot;</span>,</span>
<span id="cb34-6"><a href="sql-data-analyse.html#cb34-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Jaren&quot;</span>,</span>
<span id="cb34-7"><a href="sql-data-analyse.html#cb34-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Kindersterfte per duizend kinderen&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-20-2.png" width="672" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="sql-data-analyse.html#cb35-1" aria-hidden="true" tabindex="-1"></a>joined <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> gdp, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb35-2"><a href="sql-data-analyse.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb35-3"><a href="sql-data-analyse.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>) <span class="sc">+</span> </span>
<span id="cb35-4"><a href="sql-data-analyse.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> </span>
<span id="cb35-5"><a href="sql-data-analyse.html#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Verhouding BBP per continent&quot;</span>,</span>
<span id="cb35-6"><a href="sql-data-analyse.html#cb35-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;Continent&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-20-3.png" width="672" /></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="dosis-response-analyse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="zelfgemaakte-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
